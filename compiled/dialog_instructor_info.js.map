{"version":3,"file":"dialog_instructor_info.js","names":["Dialog","showDialog","miesiacF","PlaceType","gather","zebra","ClassGroupSelectorComp","useEffect","useState","createRef","useCallback","cloneElement","React","styles","jsx","___EmotionJSX","DialogInstructorInfo","Component","instructorId","state","instructor","constructor","props","reactEl","errorF","err","console","log","setState","error","fet","then","res","catch","dialog","render","createElement","ref","title","text","firstName","lastName","className","dialog_instructor_info","phoneNum","nick","instTypeToStr","type","DivInstructorAdditionalInfo","chainClasses","ret","i","arguments","length","additionalInfo","isProcessing","setProcessing","isEditing","setEditing","textareaVal","setTextareaVal","additional_info_container","processing","onChange","event","target","value","onClick","id","method","body","readOnly","typeInt"],"sources":["../uncompiled/dialog_instructor_info.js"],"sourcesContent":["import {Dialog,showDialog} from \"./dialog.js\";\r\nimport {miesiacF, PlaceType} from \"./panel_platnosci.js\";\r\nimport {gather, zebra} from \"./main.js\";\r\nimport {ClassGroupSelectorComp} from \"../compiled/components_common\";\r\nconst { useEffect,useState,createRef,useCallback,cloneElement } = React\r\n\r\nimport * as styles from \"../../css-modules/dialog_instructor_info.css\"\r\n\r\n//import { jsx } from '@emotion/react'\r\n\r\nexport class DialogInstructorInfo extends React.Component {\r\n    instructorId = -1;\r\n    state = {instructor:null}\r\n    constructor(props) {\r\n        super(props)\r\n        this.instructorId = props.instructorId\r\n\r\n        const reactEl = this\r\n\r\n        const errorF = (err)=>{\r\n            console.log(err)\r\n            this.setState({...this.state, error: err})\r\n        }\r\n\r\n        fet(`instructors/${this.instructorId}`).then((res)=>{\r\n            this.setState({...this.state,instructor:res})\r\n\r\n            //this.dialog.current.setTitle(`instruktor [${res?.firstName ?? \"--\"} ${res?.lastName ?? \"--\"}]`)\r\n        }).catch(errorF)\r\n    }\r\n    dialog = createRef()\r\n\r\n    render() {\r\n        if(this.state.error != null) {\r\n            return <Dialog ref={this.dialog} title={`instruktor [ERR]`}>\r\n                <span>{this.state.error.text()}</span>\r\n            </Dialog>\r\n        }\r\n\r\n        const instructor = this.state.instructor\r\n\r\n        return <Dialog ref={this.dialog} title={`instruktor [${instructor?.firstName ?? \"--\"} ${instructor?.lastName ?? \"--\"}]`}>\r\n            {instructor == null ? <span>czekaj...</span> :\r\n                <div className={styles.dialog_instructor_info}>\r\n                    <table>\r\n                        <tbody>\r\n                        <tr>\r\n                            <th>imie</th>\r\n                            <th>nazwisko</th>\r\n                            <th>telefon</th>\r\n                            <th>login</th>\r\n                            <th>rodzaj</th>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>{instructor.firstName}</td>\r\n                            <td>{instructor.lastName}</td>\r\n                            <td>{instructor.phoneNum}</td>\r\n                            <td>{instructor.nick}</td>\r\n                            <td>{instTypeToStr(instructor.type)}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <DivInstructorAdditionalInfo instructor={instructor}/>\r\n                </div>\r\n            }\r\n        </Dialog>\r\n    }\r\n}\r\n\r\nfunction chainClasses() {\r\n    let ret = \"\"\r\n    for (var i = 0; i < arguments.length; i++) {\r\n        ret +=arguments[i];\r\n    }\r\n}\r\n\r\nfunction DivInstructorAdditionalInfo(props) {\r\n    const instructor = props.instructor\r\n\r\n    const additionalInfo = instructor.additionalInfo\r\n\r\n//css={{backgroundColor: 'hotpink'}}\r\n\r\n    const [isProcessing, setProcessing] = useState(false)\r\n    const [isEditing, setEditing] = useState(false)\r\n    const [textareaVal, setTextareaVal] = useState(additionalInfo)\r\n\r\n    if (isEditing) {\r\n        return <div className={`${styles.additional_info_container}${isProcessing ? \" \"+styles.processing : \"\"}`}>\r\n            <textarea onChange={(event) => {\r\n                setTextareaVal(event.target.value)\r\n            }} value={textareaVal ?? \"--\"}></textarea>\r\n\r\n            <i onClick={() => {\r\n                if(isProcessing) {\r\n                    return\r\n                }\r\n                setProcessing(true)\r\n                fet(`instructors/${instructor.id}`, {\r\n                    method: \"PATCH\",\r\n                    body: {\r\n                        id: instructor.id,\r\n                        additionalInfo: textareaVal\r\n                    }\r\n                }).then((res) => {\r\n                    setEditing(false)\r\n                    setProcessing(false)\r\n                }).catch((err)=>{\r\n                    setProcessing(false)\r\n                })\r\n            }} className=\"fa-solid fa-floppy-disk\"></i>\r\n        </div>\r\n    }\r\n\r\n    return <div className={styles.additional_info_container}>\r\n        <textarea readOnly={true} value={textareaVal ?? \"--\"}></textarea>\r\n        <i onClick={() => {\r\n            setEditing(true)\r\n        }} className=\"fa-solid fa-pen-to-square\" aria-hidden=\"true\"></i>\r\n    </div>\r\n}\r\n\r\nfunction instTypeToStr(typeInt) {\r\n    if (typeInt == 0) {\r\n        return \"student\"\r\n    } else if (typeInt == 1) {\r\n        return \"firma\"\r\n    } else if (typeInt == 2) {\r\n        return \"pracownik\"\r\n    } else {\r\n        return \"inny\"\r\n    }\r\n}"],"mappings":"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","ignoreList":[]}