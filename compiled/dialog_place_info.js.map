{"version":3,"file":"dialog_place_info.js","names":["Dialog","showDialog","miesiacF","PlaceType","gather","zebra","ClassGroupSelectorComp","useEffect","useState","createRef","useCallback","cloneElement","React","styles","jsx","___EmotionJSX","DialogPlaceInfo","Component","placeId","state","instructor","constructor","props","id","reactEl","errorF","err","console","log","setState","error","fet","then","res","place","catch","dialog","render","createElement","ref","title","text","name","className","dialog_place_info","address","address1","phoneNum","instTypeToStr","type","DivPlaceAdditionalInfo","additionalInfo","isProcessing","setProcessing","isEditing","setEditing","textareaVal","setTextareaVal","additional_info_container","processing","onChange","event","target","value","onClick","method","body","readOnly","typeInt"],"sources":["../uncompiled/dialog_place_info.js"],"sourcesContent":["import {Dialog,showDialog} from \"./dialog.js\";\r\nimport {miesiacF, PlaceType} from \"./panel_platnosci.js\";\r\nimport {gather, zebra} from \"./main.js\";\r\nimport {ClassGroupSelectorComp} from \"../compiled/components_common\";\r\nconst { useEffect,useState,createRef,useCallback,cloneElement } = React\r\n\r\nimport * as styles from \"../../css-modules/dialog_place_info.css\"\r\n\r\n//import { jsx } from '@emotion/react'\r\n\r\nexport class DialogPlaceInfo extends React.Component {\r\n    placeId = -1;\r\n    state = {instructor:null}\r\n    constructor(props) {\r\n        super(props)\r\n        this.placeId = props.id\r\n\r\n        const reactEl = this\r\n\r\n        const errorF = (err)=>{\r\n            console.log(err)\r\n            this.setState({...this.state, error: err})\r\n        }\r\n\r\n        fet(`places/${this.placeId}`).then((res)=>{\r\n            this.setState({...this.state,place:res})\r\n\r\n            //this.dialog.current.setTitle(`instruktor [${res?.firstName ?? \"--\"} ${res?.lastName ?? \"--\"}]`)\r\n        }).catch(errorF)\r\n    }\r\n    dialog = createRef()\r\n\r\n    render() {\r\n        if(this.state.error != null) {\r\n            return <Dialog ref={this.dialog} title={`miejsce [ERR]`}>\r\n                <span>{this.state.error.text()}</span>\r\n            </Dialog>\r\n        }\r\n\r\n        const place = this.state.place\r\n\r\n        return <Dialog ref={this.dialog} title={`miejsce [${place?.name ?? \"--\"}]`}>\r\n            {place == null ? <span>czekaj...</span> :\r\n                <div className={styles.dialog_place_info}>\r\n                    <table>\r\n                        <tbody>\r\n                        <tr>\r\n                            <th>nazwa</th>\r\n                            <th>adres</th>\r\n                            <th>adres2</th>\r\n                            <th>telefon</th>\r\n                            <th>rodzaj</th>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>{place.name}</td>\r\n                            <td>{place.address}</td>\r\n                            <td>{place.address1}</td>\r\n                            <td>{place.phoneNum}</td>\r\n                            <td>{instTypeToStr(place.type)}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <DivPlaceAdditionalInfo place={place}/>\r\n                </div>\r\n            }\r\n        </Dialog>\r\n    }\r\n}\r\n\r\nfunction DivPlaceAdditionalInfo(props) {\r\n    const place = props.place\r\n\r\n    const additionalInfo = place.additionalInfo\r\n\r\n    const [isProcessing, setProcessing] = useState(false)\r\n    const [isEditing, setEditing] = useState(false)\r\n    const [textareaVal, setTextareaVal] = useState(additionalInfo)\r\n\r\n    if (isEditing) {\r\n        return <div className={`${styles.additional_info_container}${isProcessing ? \" \"+styles.processing : \"\"}`}>\r\n            <textarea onChange={(event) => {\r\n                setTextareaVal(event.target.value)\r\n            }} value={textareaVal ?? \"--\"}></textarea>\r\n\r\n            <i onClick={() => {\r\n                if(isProcessing) {\r\n                    return\r\n                }\r\n                setProcessing(true)\r\n                fet(`places/${place.id}`, {\r\n                    method: \"PATCH\",\r\n                    body: {\r\n                        additionalInfo: textareaVal\r\n                    }\r\n                }).then((res) => {\r\n                    setEditing(false)\r\n                    setProcessing(false)\r\n                }).catch((err)=>{\r\n                    setProcessing(false)\r\n                })\r\n            }} className=\"fa-solid fa-floppy-disk\"></i>\r\n        </div>\r\n    }\r\n\r\n    return <div className={styles.additional_info_container}>\r\n        <textarea readOnly={true} value={textareaVal ?? \"--\"}></textarea>\r\n        <i onClick={() => {\r\n            setEditing(true)\r\n        }} className=\"fa-solid fa-pen-to-square\" aria-hidden=\"true\"></i>\r\n    </div>\r\n}\r\n\r\nfunction instTypeToStr(typeInt) {\r\n    if (typeInt == 0) {\r\n        return \"dzieci\"\r\n    } else if (typeInt == 1) {\r\n        return \"placówka\"\r\n    } else if (typeInt == 2) {\r\n        return \"dorośli\"\r\n    } else {\r\n        return \"inny\"\r\n    }\r\n}"],"mappings":"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","ignoreList":[]}