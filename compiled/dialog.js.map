{"version":3,"file":"dialog.js","names":["WiadomosciUczestnika","jsx","___EmotionJSX","useRef","useEffect","useState","createRef","useCallback","cloneElement","React","modular","dialogs","showRenderedDialog","dialogObj","body","document","getElementsByTagName","dialogHolder","createElement","append","root","ReactDOM","createRoot","elCl","render","showDialog","dialogClass","dialogOpts","dialogEl","getByName","dialogName","Object","keys","includes","showByName","name","dialog","dialogRoot","Dialog","Component","constructor","props","boxEl","headerEl","titleClickCallback","element","children","state","wiadomosci","closed","content","title","actualTitle","setClosed","b","setState","setTitle","t","componentDidMount","current","makeDraggable","callback_exists","isBlacky","blacky","className","ref","src","onClick","onClose","style","fontSize","elmnt","header","pos1","pos2","pos3","pos4","onmousedown","dragMouseDown","e","window","event","which","preventDefault","clientX","clientY","onmouseup","closeDragElement","onmousemove","elementDrag","top","offsetTop","left","offsetLeft","DialogYesNo","unmount","yesClicked","type","value","noClicked"],"sources":["../uncompiled/dialog.js"],"sourcesContent":["import WiadomosciUczestnika from \"./wiadomosci_dialog.js\";\r\nconst { useRef,useEffect,useState,createRef,useCallback,cloneElement } = React\r\nmodular.dialogs = {\r\n    showRenderedDialog: (dialogObj)=>{\r\n        const body = document.getElementsByTagName(\"body\")[0]\r\n        const dialogHolder = document.createElement(\"div\")\r\n        body.append(dialogHolder)\r\n\r\n        //ReactDOM.createRoot(dialogHolder).render(dialogObj)\r\n        const root = ReactDOM.createRoot(dialogHolder)\r\n\r\n        //INJECT REACT ROOT OBJ INTO RENDERED COMPONENT\r\n        const elCl = cloneElement(\r\n            dialogObj, {root:root}\r\n        )\r\n\r\n        root.render(elCl)\r\n    },\r\n    showDialog: (dialogClass,dialogOpts)=>{\r\n        const body = document.getElementsByTagName(\"body\")[0]\r\n        const dialogHolder = document.createElement(\"div\")\r\n        body.append(dialogHolder)\r\n\r\n        const dialogEl = React.createElement(dialogClass,dialogOpts)\r\n        ReactDOM.createRoot(dialogHolder).render(dialogEl)\r\n    },\r\n    getByName: (dialogName) => {\r\n        if(Object.keys(modular.dialogs.dialogs).includes(dialogName)) {\r\n            return modular.dialogs.dialogs[dialogName]\r\n        }\r\n        return null\r\n    },\r\n    showByName: (name) => {\r\n        const dialog = modular.dialogs.getByName(name)\r\n        const dialogEl = React.createElement(dialog,null)\r\n        modular.dialogs.showDialog(dialogEl)\r\n    }\r\n}\r\n\r\nlet dialogRoot = null\r\nexport function showDialog(dialog) {\r\n    /*let body = document.getElementsByTagName(\"body\")[0]\r\n    injectCrEl(body)\r\n    const root = ReactDOM.createRoot(body.crEl(\"div\"))\r\n    root.render(dialog)*/\r\n\r\n    /*const body = document.getElementsByTagName(\"body\")[0]\r\n    const dialogHolder = document.createElement(\"div\")\r\n    body.append(dialogHolder)\r\n\r\n    ReactDOM.createRoot(dialogHolder).render(dialog)*/\r\n    modular.dialogs.showRenderedDialog(dialog)\r\n}\r\nexport class Dialog extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.boxEl = createRef()\r\n        this.headerEl = createRef()\r\n\r\n        this.titleClickCallback = null\r\n\r\n\r\n        /*const element = props.children.type == \"div\" ? props.children : cloneElement(\r\n            props.children,\r\n            {\r\n                title: (t)=>{this.setState({title:t})},\r\n                dialogCloseHandler: (c)=>{this.setState({closed:c})},\r\n                callbackSetter: (c)=>{this.titleClickCallback = c},\r\n                dialog: this\r\n            }\r\n        )*/\r\n\r\n        const element = props.children\r\n\r\n        this.state = {\r\n            wiadomosci: null,\r\n\r\n            closed: null,\r\n            content: element,\r\n\r\n            title: props.title,\r\n            actualTitle: props.title\r\n        };\r\n    }\r\n\r\n    setClosed(b) {this.setState({closed:b})}\r\n    setTitle(t) {this.setState({title:t})}\r\n    componentDidMount() {\r\n        if(this.boxEl == null || this.boxEl.current == null) {\r\n            return\r\n        }\r\n        this.makeDraggable(this.boxEl.current,this.headerEl.current)\r\n    }\r\n\r\n    render() {//this.state.content\r\n        const callback_exists = this.titleClickCallback != null;\r\n        if(this.state.closed) {\r\n            return null\r\n        }\r\n        const isBlacky = this.props.blacky != null && this.props.blacky\r\n\r\n        //props.title may be null at first\r\n        //but state.title will contain Dialog\r\n\r\n        //title in state object has changed\r\n        //propagate title from new state to props\r\n        if(this.state.actualTitle != this.state.title) {\r\n            this.props.title = this.state.title\r\n\r\n            this.state.actualTitle = this.state.title\r\n        }\r\n\r\n        //title in props object has changed\r\n        //propagate new title from props to state\r\n        if(this.state.actualTitle != this.props.title) {\r\n            this.state.title = this.props.title\r\n//asdf//\r\n            this.state.actualTitle = this.state.title\r\n        }\r\n\r\n        const title = this.state.actualTitle ?? \"Dialog\"\r\n\r\n        return (//<span className={callback_exists ? \"click\" : \"\"} onClick={()=>{if(!callback_exists) return; this.titleClickCallback()}}>{this.state.title}</span>\r\n            <div className={`popup_modern${isBlacky ? \"_blacky\" : \"\"} centered`} ref={this.boxEl}>\r\n                <div className=\"header\" ref={this.headerEl}>\r\n                    {isBlacky ? null : <img src=\"https://prestiz.org/images/icon.png\"/>}\r\n                    {typeof title === \"string\" ? <span>{title}</span> : title}\r\n                    <i onClick={()=>{\r\n                        this.setState({closed: true})\r\n                        if(this.props.onClose != null) {\r\n                            this.props.onClose()\r\n                        }\r\n                    }} className=\"fa-solid fa-xmark popup-close-btn\" style={{fontSize: \"18px\"}}></i>\r\n                </div>\r\n                <div className=\"content\">{this.props.children}</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    makeDraggable(elmnt,header) {\r\n        let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0\r\n        if (header != null) {\r\n            // if present, the header is where you move the DIV from:\r\n            header.onmousedown = dragMouseDown\r\n        } else {\r\n            // otherwise, move the DIV from anywhere inside the DIV:\r\n            elmnt.onmousedown = dragMouseDown\r\n        }\r\n\r\n        function dragMouseDown(e) {\r\n            e = e || window.event\r\n            if(e.which !== 1) {\r\n                return\r\n            }\r\n            e.preventDefault()\r\n\r\n            // get the mouse cursor position at startup:\r\n            pos3 = e.clientX\r\n            pos4 = e.clientY\r\n            document.onmouseup = closeDragElement\r\n            // call a function whenever the cursor moves:\r\n            document.onmousemove = elementDrag\r\n        }\r\n\r\n        function elementDrag(e) {\r\n            e = e || window.event\r\n            e.preventDefault()\r\n            // calculate the new cursor position:\r\n            pos1 = pos3 - e.clientX\r\n            pos2 = pos4 - e.clientY\r\n            pos3 = e.clientX\r\n            pos4 = e.clientY\r\n            // set the element's new position:\r\n            elmnt.style.top = (elmnt.offsetTop - pos2) + \"px\"\r\n            elmnt.style.left = (elmnt.offsetLeft - pos1) + \"px\"\r\n        }\r\n\r\n        function closeDragElement() {\r\n            // stop moving when mouse button is released:\r\n            document.onmouseup = null\r\n            document.onmousemove = null\r\n        }\r\n    }\r\n}\r\nexport function DialogYesNo(props) {\r\n    const dialog = useRef(null)\r\n\r\n    return <Dialog ref={dialog} title={props.title != null ? props.title : \"potwierdzenie\"}>\r\n        <div className=\"dialog_yes_no\">\r\n            <span>czy na pewno?</span>\r\n            <div>\r\n                <input onClick={()=> {\r\n                    props.root.unmount()\r\n                    props?.yesClicked?.()\r\n                }} type=\"button\" value=\"tak\"></input>\r\n                <input onClick={()=> {\r\n                    props.root.unmount()\r\n                    props.noClicked?.()\r\n                }} type=\"button\" value=\"nie\"></input>\r\n            </div>\r\n        </div>\r\n    </Dialog>\r\n}"],"mappings":"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","ignoreList":[]}