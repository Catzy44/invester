{"version":3,"file":"copy_uczestnik_dialog_depre.js","names":["nitro","jsx","___EmotionJSX","useEffect","useState","createRef","useCallback","React","CopyUczestnikLegacyDialog","Component","constructor","uczestnikId","dialog","undefined","setTitle","createElement","state","uczestnik","foundPlaces","error","seasons","selectedSeasonId","loadDataFromServer","findMiejsceInput","componentWillUnmount","componentDidMount","componentDidUpdate","prevProps","prevState","_prevContext","render","length","seasons_els","map","s","i","id","nazwa","timestamp","odStr","doStr","onClick","setState","key","className","imie","nazwisko","imieOpiekun","nazwiskoOpiekun","miejsce","grupa","fp","places_els","push","placeSelectorButtonClicked","bind","result_cont","ref","type","onChange","searchForMiejsce","placeholder","setClosed","setActiveSeason","zmienAktywneMiejsce","dodajUczestnika","ucz","fillAddUserFormWithData","document","getElementById","value","Date","toJSON","slice","parseInt","str","current","fet","method","body","JSON","stringify","name","season","then","res","catch","err"],"sources":["../uncompiled/copy_uczestnik_dialog_depre.js"],"sourcesContent":["import {nitro} from \"./main.js\";\r\n\r\nconst { useEffect,useState,createRef,useCallback } = React\r\nexport default class CopyUczestnikLegacyDialog extends React.Component {\r\n    constructor({uczestnikId,dialog}) {\r\n        super(undefined);//counterDecreaser,globalMessageCounterUpdater\r\n\r\n        this.uczestnikId = uczestnikId\r\n        this.dialog = dialog\r\n        dialog.setTitle(<span>Kopiowanie uczestnika</span>)\r\n\r\n        this.state = {\r\n            uczestnik: null,\r\n            foundPlaces: null,\r\n            error: null,\r\n            seasons: null,\r\n            selectedSeasonId: -1\r\n        }\r\n        this.loadDataFromServer()\r\n        this.findMiejsceInput = createRef()\r\n    }\r\n    loadDataFromServer() {\r\n        nitro(`uczestnicy/${this.uczestnikId}/with_miejsce`,this,'uczestnik')\r\n        nitro(`seasons`,this,'seasons')\r\n    }\r\n    componentWillUnmount() {}\r\n\r\n    componentDidMount() {}\r\n    componentDidUpdate(prevProps, prevState, _prevContext) {}\r\n\r\n    render() {\r\n        if(this.state.error != null) {\r\n            return (\r\n                <div>\r\n                    <span>Wystąpił błąd!</span>\r\n                    <span>{this.state.error}</span>\r\n                </div>\r\n            )\r\n        }\r\n        if(this.state.uczestnik == null) {\r\n            return (\r\n                <div>\r\n                    <span>wczytywanie [ucz]...</span>\r\n                </div>\r\n            )\r\n        }\r\n        if(this.state.seasons == null) {\r\n            return (\r\n                <div>\r\n                    <span>wczytywanie [sezony]...</span>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if(this.state.selectedSeasonId == -1) {\r\n            this.state.selectedSeasonId = this.state.seasons[this.state.seasons.length-1]['id'];\r\n        }\r\n\r\n        //LATA/SEZONY\r\n        const seasons = this.state.seasons\r\n        const seasons_els = seasons.map((s,i)=>{\r\n            const {id,nazwa,timestamp,odStr,doStr} = s\r\n            return <span onClick={()=>{this.setState({selectedSeasonId: id, foundPlaces: null})}} key={i} className={this.state.selectedSeasonId == id ? \"selected\" : null}>{nazwa}</span>\r\n        })\r\n\r\n        //UCZESTNICY-WYSZUKANI\r\n        const uczestnik = this.state.uczestnik;\r\n        const {imie,nazwisko,imieOpiekun,nazwiskoOpiekun,miejsce,grupa} = uczestnik\r\n\r\n        const fp = this.state.foundPlaces\r\n        const places_els = []\r\n        for(let i = 0; i < 10; i++) {\r\n            if(fp == null || i >= fp.length) {\r\n                places_els.push(<div key={i}><span></span></div>)\r\n                continue\r\n            }\r\n            const {id,nazwa} = fp[i]\r\n            places_els.push(<div key={i} onClick={this.placeSelectorButtonClicked.bind(this,id)}><span>{nazwa}</span></div>)\r\n        }\r\n\r\n        const result_cont = fp == null ? null : <div className=\"results\">{places_els}</div>\r\n\r\n        return (\r\n            <div className=\"copy_user_dialog\">\r\n                <span className=\"user_name\">{imie} {nazwisko}</span>\r\n                <div>\r\n                    <div className=\"select_year_side\">\r\n                        <span>docelowy sezon</span>\r\n                        <div>\r\n                            {seasons_els}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"search_side\">\r\n                        <span>docelowe miejsce</span>\r\n                        <div className=\"search_for_place\">\r\n                            <input ref={this.findMiejsceInput} type=\"text\" onChange={this.searchForMiejsce.bind(this)} placeholder=\"Szukaj miejsca...\"/>\r\n                            {result_cont}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    placeSelectorButtonClicked(id) {\r\n        /*fet(`miejsca/${id}/with_groups`).then(res=>{\r\n            this.setState({selectedPlaceData: res})\r\n        }).catch(err=>{\r\n            this.setState({error: err})\r\n        })*/\r\n        this.dialog.setClosed(true)\r\n        /*zmienAktywneMiejsce(id,()=>{//zmienia miejsce\r\n            dodajUczestnika(()=>{//otwiera dialog\r\n                let ucz = this.state.uczestnik\r\n\r\n                fillAddUserFormWithData(ucz);//wypełnia dialog danymi\r\n\r\n                //przesyłane do PHP aby po zapisaniu nowego uczestnika zmienić kolor starego\r\n                //przesłane id zostaje dodatkowo zapisane w nowym uczestniku w bazie jako \"copiedFrom\"\r\n                const i = (id)=>{\r\n                    return document.getElementById(id)\r\n                }\r\n                i(\"formularzDodawaniaUzytkownika2PrzepisywanyUczestnikId\").value = this.uczestnikId\r\n\r\n                i(\"formularzDodawaniaUzytkownika2Dodanie\").value = new Date().toJSON().slice(0,10)\r\n                i(\"formularzDodawaniaUzytkownika2WiekDziecka\").value = parseInt(i(\"formularzDodawaniaUzytkownika2WiekDziecka\").value)+1\r\n            },id)\r\n        })*/\r\n        setActiveSeason(this.state.selectedSeasonId,()=>{\r\n            zmienAktywneMiejsce(id,()=>{\r\n                dodajUczestnika(()=>{//otwiera dialog\r\n                    let ucz = this.state.uczestnik\r\n\r\n                    fillAddUserFormWithData(ucz);//wypełnia dialog danymi\r\n\r\n                    //przesyłane do PHP aby po zapisaniu nowego uczestnika zmienić kolor starego\r\n                    //przesłane id zostaje dodatkowo zapisane w nowym uczestniku w bazie jako \"copiedFrom\"\r\n                    const i = (id)=>{\r\n                        return document.getElementById(id)\r\n                    }\r\n                    i(\"formularzDodawaniaUzytkownika2PrzepisywanyUczestnikId\").value = this.uczestnikId\r\n\r\n                    i(\"formularzDodawaniaUzytkownika2Dodanie\").value = new Date().toJSON().slice(0,10)\r\n                    i(\"formularzDodawaniaUzytkownika2WiekDziecka\").value = parseInt(i(\"formularzDodawaniaUzytkownika2WiekDziecka\").value)+1\r\n                },id)\r\n            })\r\n        })\r\n    }\r\n\r\n    searchForMiejsce() {\r\n        //setTimeout(()=>{\r\n            const str = this.findMiejsceInput.current.value\r\n            if(str.length < 1) {\r\n                return\r\n            }\r\n\r\n            fet(`miejsca/search`,{\r\n                method:\"POST\",\r\n                body:JSON.stringify({\r\n                    name: str,\r\n                    season: this.state.selectedSeasonId\r\n                })\r\n            }).then(res=>{\r\n                this.setState({foundPlaces:res})\r\n            }).catch(err=>{\r\n                this.setState({error:err.error})\r\n            })\r\n        //},1)\r\n    }\r\n}"],"mappings":"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","ignoreList":[]}