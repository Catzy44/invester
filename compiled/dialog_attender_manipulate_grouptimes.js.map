{"version":3,"file":"dialog_attender_manipulate_grouptimes.js","names":["Dialog","showDialog","miesiacF","PlaceType","useEffect","useState","createRef","useCallback","cloneElement","React","DialogAttenderManipulateGroupChanges","Component","attenderId","state","payments","season","closedMonths","place","biggestCycleNum","constructor","props","errorF","err","console","log","injectRField","gather","attenderData","placeData","rodzaj","TYPE_ADULTS","groupId","dialog","render","monthsRows","placeType","i","status","amountPaid","amountToPay","closed","cm","find","id","month","year","cycle","amount","AlterPaymentCell","setCM","closedMonth","locked","setLocked","setAmount","freshAmount","altering","setAlteringMode","processing","setProcessing","inp","createElement","className","type","defaultValue","ref","onClick","current","inputValue","value","fet","method","body","JSON","stringify","cycleNum","then","res","catch","quickcopy","push","key","startingMonth","parseInt","split","fromFirstToLatestMonth","funct","monthIdx","monthNum","title","showHelp","HelpDialog"],"sources":["../uncompiled/dialog_attender_manipulate_grouptimes.js"],"sourcesContent":["import {Dialog,showDialog} from \"./dialog.js\";\r\nimport {miesiacF, PlaceType} from \"./panel_platnosci.js\";\r\nconst { useEffect,useState,createRef,useCallback,cloneElement } = React\r\n\r\n\r\nexport class DialogAttenderManipulateGroupChanges extends React.Component {\r\n    attenderId = -1;\r\n    state = {payments:null,season:null,closedMonths:null,place:null,biggestCycleNum:null}\r\n    constructor(props) {\r\n        super(props)\r\n        this.attenderId = props.attenderId\r\n\r\n        const errorF = (err)=>{\r\n            console.log(err)\r\n            injectRField(this,\"error\")(err)\r\n        }\r\n\r\n        gather(`uczestnicy/${this.attenderId}/payments/fresh`,injectRField(this,\"payments\"),errorF)\r\n        gather(`uczestnicy/${this.attenderId}/season`,injectRField(this,\"season\"),errorF)\r\n        gather(`uczestnicy/${this.attenderId}/closedMonths`,injectRField(this,\"closedMonths\"),errorF)\r\n        gather(`uczestnicy/${this.attenderId}`,attenderData=>{\r\n            injectRField(this,\"attender\")(attenderData)\r\n\r\n            gather(`uczestnicy/${this.attenderId}/miejsce`,placeData=>{\r\n                injectRField(this,\"place\")(placeData)\r\n\r\n                const rodzaj = placeData.rodzaj\r\n                if(rodzaj == PlaceType.TYPE_ADULTS) {\r\n                    gather(`grupy/${attenderData.groupId}/biggestCycleNum`,injectRField(this,\"biggestCycleNum\"),errorF)\r\n                }\r\n            },errorF)\r\n        },errorF)\r\n        //gather(`uczestnicy/${this.attenderId}/at`,this,\"place\",errorF)\r\n    }\r\n    dialog = createRef()\r\n\r\n    render() {\r\n        if(this.state.payments == null)\r\n            return null\r\n        if(this.state.season == null)\r\n            return null\r\n        if(this.state.closedMonths == null)\r\n            return null\r\n        if(this.state.place == null) {\r\n            return null\r\n        }\r\n\r\n        const monthsRows = []\r\n        const attenderId = this.attenderId\r\n\r\n        const placeType = this.state.place.rodzaj\r\n        if(placeType == PlaceType.TYPE_ADULTS) {\r\n            if(this.state.biggestCycleNum == null) {\r\n                return null\r\n            }\r\n            const biggestCycleNum = this.state.biggestCycleNum\r\n\r\n            for(let i = 1; i < biggestCycleNum+1; i++) {\r\n                const {status,amountPaid,amountToPay,closed} = this.state.payments[i]\r\n                const cm = this.state.closedMonths.find(({id,season,month,year,cycle,amount})=>cycle === i)\r\n\r\n                function AlterPaymentCell(props) {\r\n                    const [cm,setCM] = useState(props.closedMonth)\r\n\r\n                    const [locked,setLocked] = useState(cm != null)\r\n                    const [amount,setAmount] = useState(locked && cm != null ? cm.amount : props.freshAmount)\r\n\r\n                    const [altering,setAlteringMode] = useState(false)\r\n\r\n                    const [processing,setProcessing] = useState(false)\r\n\r\n                    const inp = createRef()\r\n\r\n                    if(altering) {\r\n                        return <div className={`alter_payment_el${processing ? \" processing\" : \"\"}`}>\r\n                            <input type=\"number\" defaultValue={amount} ref={inp}/>\r\n                            <i className=\"fa-solid fa-floppy-disk\" onClick={()=>{\r\n                                if(inp.current == null) {\r\n                                    return\r\n                                }\r\n                                const inputValue = inp.current.value\r\n                                setProcessing(true)\r\n                                fet(\"closedMonths\", {\r\n                                    method: \"POST\", body: JSON.stringify({\r\n                                        attenderId: attenderId,\r\n                                        cycle: props.cycleNum,\r\n                                        amount: inputValue\r\n                                    })\r\n                                }).then(res => {\r\n                                    setProcessing(false)\r\n                                    setCM(res)\r\n                                    setAmount(inputValue)\r\n                                    setLocked(true)\r\n                                    setAlteringMode(false)\r\n                                }).catch(err => {\r\n                                    setProcessing(false)\r\n                                    console.log(err)\r\n                                })\r\n                            }}></i>\r\n                            <i className=\"fa-solid fa-trash\" onClick={()=>{\r\n                                if(cm == null) {\r\n                                    setAlteringMode(false)\r\n                                    return\r\n                                }\r\n                                setProcessing(true)\r\n                                fet(`closedMonths/${cm.id}`, {method: \"DELETE\"}).then(res => {\r\n                                    setProcessing(false)\r\n                                    setCM(null)\r\n                                    setAmount(props.freshAmount)\r\n                                    setLocked(false)\r\n                                    setAlteringMode(false)\r\n                                }).catch(err => {\r\n                                    setProcessing(false)\r\n                                    console.log(err)\r\n                                })\r\n                            }}></i>\r\n                            <i className=\"fa-solid fa-x\" onClick={()=>{\r\n                                setAlteringMode(false)\r\n                            }}></i>\r\n                        </div>\r\n                    }\r\n\r\n                    function quickcopy() {\r\n                        setProcessing(true)\r\n                        fet(\"closedMonths\", {\r\n                            method: \"POST\", body: JSON.stringify({\r\n                                attenderId: attenderId,\r\n                                cycle: props.cycleNum,\r\n                                amount: props.freshAmount\r\n                            })\r\n                        }).then(res => {\r\n                            setProcessing(false)\r\n                            setCM(res)\r\n                            setAmount(props.freshAmount)\r\n                            setLocked(true)\r\n                            setAlteringMode(false)\r\n                        }).catch(err => {\r\n                            setProcessing(false)\r\n                            console.log(err)\r\n                        })\r\n                    }\r\n\r\n                    return locked ?\r\n                        <div className={`alter_payment_el${processing ? \" processing\" : \"\"}`}>\r\n                            <span>ustalona: {amount}</span>\r\n                            <input type=\"button\" value=\"zmieÅ„\" onClick={()=>{\r\n                                setAlteringMode(true)\r\n                            }}/>\r\n                            <input className=\"quickcopy\" type=\"button\" value=\"<\" onClick={quickcopy}/>\r\n                        </div>\r\n                        :\r\n                        <div className={`alter_payment_el${processing ? \" processing\" : \"\"}`}>\r\n                            <span>nieustalona</span>\r\n                            <input type=\"button\" value=\"ustal\" onClick={()=>{\r\n                                setAlteringMode(true)\r\n                            }}/>\r\n                            <input className=\"quickcopy\" type=\"button\" value=\"<\" onClick={quickcopy}/>\r\n                        </div>\r\n                }\r\n\r\n                monthsRows.push(\r\n                    <tr key={i}>\r\n                        <td>Cykl {i}</td>\r\n                        <td className=\"cm_cell\"><AlterPaymentCell cycleNum={i} closedMonth={cm} freshAmount={amountToPay}/></td>\r\n                        <td>{amountToPay}</td>\r\n                    </tr>\r\n                )\r\n            }\r\n\r\n        } else {\r\n            const startingMonth = parseInt(this.state.season['odStr'].split('-')[1])-1\r\n            const fromFirstToLatestMonth = (funct) => {\r\n                for(let i = 0; i < 12; i++) {\r\n                    const monthIdx = (startingMonth+i)%12\r\n                    funct(monthIdx)\r\n                }\r\n\r\n            }\r\n\r\n            fromFirstToLatestMonth((monthIdx)=>{\r\n\r\n                const {status,amountPaid,amountToPay,closed} = this.state.payments[monthIdx]\r\n                const cm = this.state.closedMonths.find(({id,season,month,year,cycle,amount})=>month === monthIdx)\r\n\r\n                function AlterPaymentCell(props) {\r\n                    const [cm,setCM] = useState(props.closedMonth)\r\n\r\n                    const [locked,setLocked] = useState(cm != null)\r\n                    const [amount,setAmount] = useState(locked && cm != null ? cm.amount : props.freshAmount)\r\n\r\n                    const [altering,setAlteringMode] = useState(false)\r\n\r\n                    const [processing,setProcessing] = useState(false)\r\n\r\n                    const inp = createRef()\r\n\r\n                    if(altering) {\r\n                        return <div className={`alter_payment_el${processing ? \" processing\" : \"\"}`}>\r\n                            <input type=\"number\" defaultValue={amount} ref={inp}/>\r\n                            <i className=\"fa-solid fa-floppy-disk\" onClick={()=>{\r\n                                if(inp.current == null) {\r\n                                    return\r\n                                }\r\n                                const inputValue = inp.current.value\r\n                                setProcessing(true)\r\n                                fet(\"closedMonths\", {\r\n                                    method: \"POST\", body: JSON.stringify({\r\n                                        attenderId: attenderId,\r\n                                        month: props.monthNum,\r\n                                        amount: inputValue\r\n                                    })\r\n                                }).then(res => {\r\n                                    setProcessing(false)\r\n                                    setCM(res)\r\n                                    setAmount(inputValue)\r\n                                    setLocked(true)\r\n                                    setAlteringMode(false)\r\n                                }).catch(err => {\r\n                                    setProcessing(false)\r\n                                    console.log(err)\r\n                                })\r\n                            }}></i>\r\n                            <i className=\"fa-solid fa-trash\" onClick={()=>{\r\n                                if(cm == null) {\r\n                                    setAlteringMode(false)\r\n                                    return\r\n                                }\r\n                                setProcessing(true)\r\n                                fet(`closedMonths/${cm.id}`, {method: \"DELETE\"}).then(res => {\r\n                                    setProcessing(false)\r\n                                    setCM(null)\r\n                                    setAmount(props.freshAmount)\r\n                                    setLocked(false)\r\n                                    setAlteringMode(false)\r\n                                }).catch(err => {\r\n                                    setProcessing(false)\r\n                                    console.log(err)\r\n                                })\r\n                            }}></i>\r\n                            <i className=\"fa-solid fa-x\" onClick={()=>{\r\n                                setAlteringMode(false)\r\n                            }}></i>\r\n                        </div>\r\n                    }\r\n\r\n                    function quickcopy() {\r\n                        setProcessing(true)\r\n                        fet(\"closedMonths\", {\r\n                            method: \"POST\", body: JSON.stringify({\r\n                                attenderId: attenderId,\r\n                                month: props.monthNum,\r\n                                amount: props.freshAmount\r\n                            })\r\n                        }).then(res => {\r\n                            setProcessing(false)\r\n                            setCM(res)\r\n                            setAmount(props.freshAmount)\r\n                            setLocked(true)\r\n                            setAlteringMode(false)\r\n                        }).catch(err => {\r\n                            setProcessing(false)\r\n                            console.log(err)\r\n                        })\r\n                    }\r\n\r\n                    return locked ?\r\n                        <div className={`alter_payment_el${processing ? \" processing\" : \"\"}`}>\r\n                            <span>ustalona: {amount}</span>\r\n                            <input type=\"button\" value=\"zmieÅ„\" onClick={()=>{\r\n                                setAlteringMode(true)\r\n                            }}/>\r\n                            <input className=\"quickcopy\" type=\"button\" value=\"<\" onClick={quickcopy}/>\r\n                        </div>\r\n                        :\r\n                        <div className={`alter_payment_el${processing ? \" processing\" : \"\"}`}>\r\n                            <span>nieustalona</span>\r\n                            <input type=\"button\" value=\"ustal\" onClick={()=>{\r\n                                setAlteringMode(true)\r\n                            }}/>\r\n                            <input className=\"quickcopy\" type=\"button\" value=\"<\" onClick={quickcopy}/>\r\n                        </div>\r\n                }\r\n\r\n                monthsRows.push(\r\n                    <tr key={monthIdx}>\r\n                        <td>{miesiacF(monthIdx)}</td>\r\n                        <td className=\"cm_cell\"><AlterPaymentCell monthNum={monthIdx} closedMonth={cm} freshAmount={amountToPay}/></td>\r\n                        <td>{amountToPay}</td>\r\n                    </tr>\r\n                )\r\n            })\r\n        }\r\n\r\n\r\n        return <Dialog ref={this.dialog} title=\"rozliczenia uczestnika\">\r\n            <div className=\"dialog_attender_manipulate_payments\">\r\n            <table>\r\n                <tbody>\r\n                <tr key={\"tit\"}>\r\n                    <th>{placeType == PlaceType.TYPE_ADULTS ? \"Cykl\" : \"MiesiÄ…c\"}</th>\r\n                    <th>kwota za ten miesiÄ…c</th>\r\n                    <th>wyliczone</th>\r\n                </tr>\r\n                {monthsRows}\r\n                </tbody>\r\n            </table>\r\n                <input onClick={showHelp} value=\"pomoc\" type=\"button\"/>\r\n            </div></Dialog>\r\n    }\r\n}\r\n\r\nfunction showHelp() {\r\n    function HelpDialog(props) {\r\n\r\n        return <Dialog>\r\n            <div title=\"pomoc\">\r\n                <p>ustalenie kwoty za dany miesiÄ…c sprawia Å¼e staje siÄ™ ona \"statyczna\" - Å¼adna zmiana typu zmiana grupy zaj, zmiana rabatu, etc nie wpÅ‚ynie na niÄ…</p>\r\n                <p>usuniÄ™cie \"ustalenia kwoty\" spowoduje Å¼e kwota w danym miesiÄ…cu stanie siÄ™ \"dynamiczna\" - znowu bÄ™dÄ… na niÄ… wpÅ‚ywaÄ‡ wszystkie zmiany</p>\r\n                <p>kwota w kolumnie \"wyliczone\" jest kwotÄ… wynikajÄ…cÄ… z \"aktualnego stanu rzeczy\" - jest to kwota policzona wedÅ‚ug dostÄ™pnych na ten moment danych</p>\r\n                <p>uÅ¼ycie strzaÅ‚ki spowoduje ustalenie kwoty za dany miesiÄ…c na kwotÄ™ z kolumny \"wyliczone\"</p>\r\n                <p>program przy najbliÅ¼szej moÅ¼liwej okazji automatycznie zamknie wszystkie miesiÄ…ce dla ktÃ³rych moÅ¼e zostaÄ‡ wykonana weryfikacja pÅ‚atnoÅ›ci</p>\r\n                <p>program NIE zamyka automatycznie miesiÄ™cy w ktÃ³rych nie byÅ‚o Å¼adnych zajÄ™Ä‡</p>\r\n                <p>program NIE zamyka automatycznie miesiÄ™cy jeÅ¼eli w dowolnym poprzedzajÄ…cym miesiÄ…cu wystÄ™puje zalegÅ‚oÅ›Ä‡</p>\r\n            </div>\r\n        </Dialog>\r\n    }\r\n\r\n    showDialog(<HelpDialog/>)\r\n}\r\n\r\n/*setTimeout(()=>{\r\n    showDialog(<DialogAttenderManupulatePayments attenderId={9821}/>)\r\n},1000)*/"],"mappings":"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"}